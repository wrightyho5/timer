<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loop Timer Pro</title>
    <style>
        :root { --work: #4CAF50; --rest: #FF9800; --bg: #121212; --card: #1e1e1e; }
        body { font-family: sans-serif; text-align: center; background: var(--bg); color: white; padding: 20px; }
        .timer-card { background: var(--card); padding: 30px; border-radius: 20px; border: 2px solid #333; margin-bottom: 20px; }
        #status { font-size: 1.5rem; letter-spacing: 2px; font-weight: bold; margin-bottom: 5px; }
        #loop-count { font-size: 1.2rem; color: #888; margin-bottom: 15px; }
        #display { font-size: 6rem; font-weight: bold; font-variant-numeric: tabular-nums; line-height: 1; }
        
        .label { font-size: 0.9rem; color: #888; margin: 20px 0 10px; text-transform: uppercase; }
        .button-group { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom: 20px; }
        
        button { padding: 12px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; color: white; transition: 0.2s; }
        .btn-opt { background: #333; border: 1px solid #444; flex: 1; min-width: 70px; }
        .btn-opt.active { background: var(--rest); border-color: white; }
        .btn-work.active { background: var(--work); border-color: white; }
        
        .main-controls { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
        .btn-start { padding: 20px; background: var(--work); font-size: 1.4rem; }
        .btn-reset { background: #444; }
    </style>
</head>
<body>

    <div class="timer-card">
        <div id="status">READY</div>
        <div id="loop-count">Round: 1</div>
        <div id="display">00:30</div>
    </div>

    <div class="label">Set Work Duration</div>
    <div class="button-group">
        <button class="btn-opt btn-work active" onclick="setWork(30, this)">30s</button>
        <button class="btn-opt btn-work" onclick="setWork(60, this)">60s</button>
    </div>

    <div class="label">Set Rest Duration</div>
    <div class="button-group">
        <button class="btn-opt btn-rest" onclick="setRest(5, this)">5s</button>
        <button class="btn-opt btn-rest active" onclick="setRest(10, this)">10s</button>
        <button class="btn-opt btn-rest" onclick="setRest(20, this)">20s</button>
        <button class="btn-opt btn-rest" onclick="setRest(30, this)">30s</button>
    </div>

    <div class="main-controls">
        <button class="btn-start" id="startBtn" onclick="toggleTimer()">START WORKOUT</button>
        <button class="btn-reset" onclick="resetAll()">RESET ALL</button>
    </div>

    <script>
        let workSeconds = 30;
        let restSeconds = 10;
        let timeLeft = 30;
        let loopCount = 1;
        let isWorkPhase = true;
        let timerId = null;
        const chime = new Audio('https://actions.google.com/sounds/v1/alarms/beep_short.ogg');

        function setWork(s, btn) {
            workSeconds = s;
            if (!timerId) { timeLeft = s; updateDisplay(); }
            document.querySelectorAll('.btn-work').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function setRest(s, btn) {
            restSeconds = s;
            document.querySelectorAll('.btn-rest').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function updateDisplay() {
            document.getElementById('display').innerText = `00:${timeLeft.toString().padStart(2, '0')}`;
            document.getElementById('loop-count').innerText = `Round: ${loopCount}`;
        }

        function toggleTimer() {
            if (timerId) {
                clearInterval(timerId);
                timerId = null;
                document.getElementById('startBtn').innerText = "RESUME";
            } else {
                document.getElementById('startBtn').innerText = "PAUSE";
                timerId = setInterval(tick, 1000);
            }
        }

        function tick() {
            if (timeLeft > 0) {
                timeLeft--;
            } else {
                chime.play();
                if (isWorkPhase) {
                    isWorkPhase = false;
                    timeLeft = restSeconds;
                    document.getElementById('status').innerText = "REST";
                    document.getElementById('status').style.color = "var(--rest)";
                } else {
                    isWorkPhase = true;
                    loopCount++; // Increment loop after rest finishes
                    timeLeft = workSeconds;
                    document.getElementById('status').innerText = "WORK!";
                    document.getElementById('status').style.color = "var(--work)";
                }
            }
            updateDisplay();
        }

        function resetAll() {
            clearInterval(timerId);
            timerId = null;
            isWorkPhase = true;
            loopCount = 1;
            timeLeft = workSeconds;
            document.getElementById('status').innerText = "READY";
            document.getElementById('status').style.color = "white";
            document.getElementById('startBtn').innerText = "START WORKOUT";
            updateDisplay();
        }
    </script>
</body>
</html>

